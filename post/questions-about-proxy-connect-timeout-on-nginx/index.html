<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>å…³äºNginx proxy_connect_timeout çš„é—®é¢˜</title>

  
  





  
  <meta name="author" content="aliasmee" />
  <meta name="description" content="ä½ æ˜¯å¦‚ä½•ç†è§£proxy_connect_timeoutã€proxy_read_timeoutå’Œproxy_send_timeout çš„ï¼Œè¿™å‡ ä¸ªå‚æ•°åœ¨nginx ä½œä¸ºproxyæ—¶ï¼Œä¸åç«¯çš„ real serveré€šä¿¡è¿æ¥èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ

" />

  
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@aliasmeee" />
    <meta name="twitter:title" content="å…³äºNginx proxy_connect_timeout çš„é—®é¢˜" />
    <meta name="twitter:description" content="ä½ æ˜¯å¦‚ä½•ç†è§£proxy_connect_timeoutã€proxy_read_timeoutå’Œproxy_send_timeout çš„ï¼Œè¿™å‡ ä¸ªå‚æ•°åœ¨nginx ä½œä¸ºproxyæ—¶ï¼Œä¸åç«¯çš„ real serveré€šä¿¡è¿æ¥èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ

" />
    <meta name="twitter:image" content="https://aliasmee.github.io/media/posts/questions-about-proxy-connect-timeout-on-nginx/cover.jpg" />
  

  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="å…³äºNginx proxy_connect_timeout çš„é—®é¢˜" />
  <meta property="og:description" content="ä½ æ˜¯å¦‚ä½•ç†è§£proxy_connect_timeoutã€proxy_read_timeoutå’Œproxy_send_timeout çš„ï¼Œè¿™å‡ ä¸ªå‚æ•°åœ¨nginx ä½œä¸ºproxyæ—¶ï¼Œä¸åç«¯çš„ real serveré€šä¿¡è¿æ¥èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ

" />
  <meta property="og:url" content="https://aliasmee.github.io/post/questions-about-proxy-connect-timeout-on-nginx/" />
  <meta property="og:image" content="https://aliasmee.github.io/media/posts/questions-about-proxy-connect-timeout-on-nginx/cover.jpg" />




<meta name="generator" content="Hugo 0.41" />


<link rel="canonical" href="https://aliasmee.github.io/post/questions-about-proxy-connect-timeout-on-nginx/" />
<link rel="alternative" href="https://aliasmee.github.io/index.xml" title="aliasmee&#39;s blog " type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="google-site-verification" content="dOpqXJeKRrCfsEkfUcoR0Ys0_e1wZ_-sZi_zoDpoc_c" />






<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="aliasmee&#39;s blog " />
<meta name="msapplication-tooltip" content="aliasmee&#39;s blog " />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="https://aliasmee.github.io/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="https://aliasmee.github.io/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://aliasmee.github.io/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="https://aliasmee.github.io/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="https://aliasmee.github.io/img/touch-icon-apple.png" />
<link rel="mask-icon" href="https://aliasmee.github.io/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="https://aliasmee.github.io/css/bundle.ff02473a9a.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
        <a title="Go to comments" class="to-comment" href="#disqus_thread"><span class="icon icon-comment"></span></a>
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://aliasmee.github.io/img/avatar.jpg" alt="Avatar">
  
  <h2 class="title">aliasmee&#39;s blog </h2>
  
  <p class="subtitle">DevOps | Kubernetes | Docker | Cloud | CICD </p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            
              is-active
            ">
            <a href="https://aliasmee.github.io/">æ–‡å­—</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://github.com/aliasmee">GitHub</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://aliasmee.github.io/tags/">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://aliasmee.github.io/about/">About Me</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:name@domain.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/aliasmee" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      <li class="social-item">
        <a href="//twitter.com/aliasmeee" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="https://aliasmee.github.io/img/qrcode.jpg" title="Wechat"><span class="icon icon-wechat"></span></a>
      </li>

      <li class="social-item">
        <a href="//www.linkedin.com/in/linkedin_username" title="Linkedin"><span class="icon icon-linkedin"></span></a>
      </li>

      

      

      

      <li class="social-item">
        <a href="https://aliasmee.github.io/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">å…³äºNginx proxy_connect_timeout çš„é—®é¢˜</h1>
      <p class="post-meta">@aliasmee Â· Jun 19, 2018 Â· 3 min read</p>
    </header>
    <article class="post-content"><p>ä½ æ˜¯å¦‚ä½•ç†è§£<code>proxy_connect_timeout</code>ã€<code>proxy_read_timeout</code>å’Œ<code>proxy_send_timeout</code>
çš„ï¼Œè¿™å‡ ä¸ªå‚æ•°åœ¨nginx ä½œä¸ºproxyæ—¶ï¼Œä¸åç«¯çš„ real serveré€šä¿¡è¿æ¥èµ·åˆ°ä»€ä¹ˆä½œç”¨ï¼Ÿ</p>

<p></p>

<h3 id="é—®é¢˜èµ·æº">é—®é¢˜èµ·æº</h3>

<p>ä»Šå¤©çº¿ä¸Šç¯å¢ƒå‡ºç°ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨ç”¨æˆ·è®¿é—®webæ—¶ï¼ŒåŠ è½½æŸä¸ªé¡µé¢å¾ˆæ…¢ï¼Œæœ‰æ—¶ä¼šå‡ºç°&rdquo;504 Gateway Time-out&rdquo;,
æ£€æŸ¥äº†nginxæ—¥å¿—åï¼Œå‘ç° access.log è®°å½•çš„è¯¥é¡µé¢è¯·æ±‚è®¿é—®çš„å“åº”codeå´æ˜¯499.ï¼ˆæŸ¥çœ‹æ—¥å¿—è¿™ä¸€æ­¥æ˜¯åé¢
æ„Ÿåˆ°å›°æƒ‘ä¹‹åæ‰æƒ³æ¥çš„çœ‹æ—¥å¿—çš„ã€‚ä¸ºè‡ªå·±çš„ç¬¨è„‘å­æ„Ÿåˆ°ç¾è€»ï¼ğŸ¤¦â€â™‚ï¸ï¼‰. å› ä¸ºä¸šåŠ¡åŒäº‹ä¸€å¼€å§‹åæ˜ çš„é—®é¢˜æ˜¯æ•°æ®åº“
æŸ¥è¯¢æ¯”è¾ƒæ…¢ï¼ŒåŠ è½½å®Œè¿™ä¸ªé¡µé¢ï¼Œå…‰DBè¿™å—çš„æŸ¥è¯¢å°±æ¶ˆè€—äº†70så·¦å³ã€‚æ€è·¯ä¸€ä¸‹è·³åˆ°db ä¸Šäº†ï¼ŒæŸ¥äº†è¯¥é¡µé¢
æ‰€ç”¨åˆ°çš„sqlè¯­å¥åï¼Œå‘ç°æœ‰ä¸€æ¡å¯¹<code>user_access_logs</code> è¿™ä¸ªè¡¨çš„æŸ¥è¯¢ç”¨äº†å°†è¿‘5så·¦å³ã€‚</p>

<p>åœ¨æŸ¥è¯¢äº†è¯¥è¡¨çš„å¤§å°åï¼Œè¿™ä¸ªè¡¨åœ¨åº“é‡Œæ˜¯æœ€å¤§çš„ï¼ˆè¿™é‡Œåˆæ¶‰åŠåˆ°å¦å¤–ä¸€ä¸ª<code>å…³äºPG è¡¨ä¸æ–­å˜å¤§çš„ä¸€ä¸ªé—®é¢˜</code>ï¼‰ã€‚
å› ä¸ºè¿™ä¸ªè¡¨å­˜äº†æ‰€æœ‰ç”¨æˆ·çš„æ“ä½œè®°å½•åŠå…¶å®ƒä¿¡æ¯,è€ŒæŸ¥è¯¢æ…¢çš„è¿™ä¸ªé¡µé¢æ˜¯æŸ¥è¯¢äº†è¿™ä¸ª3ä¸ªæœˆæ—¶é—´çš„æ•°æ®,
æ‰€ä»¥ç”¨æ—¶è¾ƒä¹…ã€‚æ‰¾åˆ°äº†å¤§æ¦‚ï¼Œå…ˆå»è·Ÿä¸šåŠ¡åŒäº‹è®¨è®ºä¸‹å§ã€‚</p>

<h3 id="è§£å†³æ–¹æ¡ˆ">è§£å†³æ–¹æ¡ˆ</h3>

<p>è®¨è®ºä¹‹åï¼Œå‡ºæ¥ä¸‹é¢2ä¸ªè§£å†³æ–¹æ³•:</p>

<ul>
<li>ä¿®æ”¹è¯¥è¡¨çš„ç»“æ„ï¼Œç¼©å°å†…å®¹ï¼Œä¼˜åŒ–æŸ¥è¯¢è¯­å¥</li>
<li>ä¿®æ”¹nginx çš„è¶…æ—¶æ—¶é—´ (ä¸´æ—¶è§£å†³é¡µé¢504)</li>
</ul>

<h3 id="å®æ–½">å®æ–½</h3>

<p>ä¸ºäº†ä¸å½±å“é¡µé¢çš„æ­£å¸¸è®¿é—®ï¼Œæ¯«æ— ç–‘é—®çš„é€‰æ‹©äº†ç¬¬äºŒç§æ–¹æ¡ˆ.åœ¨ç»è¿‡å»å®˜ç½‘æŸ¥è¯¢å…³äºproxy timeout çš„
å¯é€‰é…ç½®åï¼Œæœ¬æ¥æ˜¯æƒ³é’ˆå¯¹è¯¥åŸŸååšè®¾ç½®çš„ï¼Œåæ¥å‘ç°å…¨å±€é‡Œå·²ç»æœ‰äº†è¿™å‡ é¡¹é…ç½®(<code>proxy_read_timeout</code>ã€
<code>proxy_send_timeout</code>ã€<code>proxy_connect_timeout</code>).å…¶é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">http</span> {
    <span style="color:#f92672">...</span>

    <span style="color:#e6db74">proxy_connect_timeout</span> <span style="color:#ae81ff">90</span>;
    <span style="color:#f92672">proxy_send_timeout</span> <span style="color:#ae81ff">300</span>;
    <span style="color:#f92672">proxy_read_timeout</span> <span style="color:#ae81ff">300</span>;
    <span style="color:#f92672">send_timeout</span> <span style="color:#ae81ff">300</span>;

    <span style="color:#f92672">...</span>
<span style="color:#960050;background-color:#1e0010">}</span></code></pre></div>
<p>çœ‹åˆ°è¿™ï¼Œä¼°è®¡å¤§å®¶å¿ƒé‡Œå°±æœ‰ç‚¹ç–‘æƒ‘äº†ã€‚è¿™nginx å…¨å±€ä¸æ˜¯å·²ç»è®¾ç½®äº†<code>proxy_send_timeout</code> æ—¶é—´ä¸º300ç§’äº†ä¹ˆï¼Ÿ
ä¸ºä»€ä¹ˆnginx è¿˜ä¼šå‡ºç° 504 timeout å‘¢?</p>

<p>åœ¨å¸¦ç€ç–‘æƒ‘çš„çŠ¶æ€ä¸‹ï¼Œä¿®æ”¹äº†nginx çš„é…ç½®ï¼ŒæŠŠ<code>proxy_connect_timeout</code>çš„å€¼ä¹Ÿå¢åŠ åˆ°300ç§’,ä¿®æ”¹å
çš„é…ç½®å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">http</span> {
    <span style="color:#f92672">...</span>

    <span style="color:#e6db74">proxy_connect_timeout</span> <span style="color:#ae81ff">300</span>;
    <span style="color:#f92672">proxy_send_timeout</span> <span style="color:#ae81ff">300</span>;
    <span style="color:#f92672">proxy_read_timeout</span> <span style="color:#ae81ff">300</span>;
    <span style="color:#f92672">send_timeout</span> <span style="color:#ae81ff">300</span>;

    <span style="color:#f92672">...</span>
<span style="color:#960050;background-color:#1e0010">}</span></code></pre></div>
<h3 id="éªŒè¯">éªŒè¯</h3>

<p>ä¿®æ”¹å®Œé…ç½®ï¼Œè®©ä¸šåŠ¡åŒäº‹å†æ¬¡æµ‹è¯•ä¸‹ï¼Œå‘ç°é¡µé¢å¯ä»¥åŠ è½½å‡ºæ¥ï¼Œæ²¡æœ‰å‡ºç° 504 Timeout æç¤ºäº†ã€‚é¢ï¼Œè¿™å±…ç„¶æ˜¯connectè¶…æ—¶å¼•èµ·çš„ï¼Ÿ
è€Œä¸”ä¹Ÿæ˜¯ç­‰äº†å’Œä¹‹å‰å·®ä¸å¤šçš„æ—¶é—´(1åˆ†é’Ÿå¤šä¸€ç‚¹). è¿™ä¸ªå› DB æŸ¥è¯¢æ…¢å¯¼è‡´çš„ç½‘é¡µåŠ è½½è¶…æ—¶å¼•å‘nginxç½‘å…³è¶…æ—¶çš„é—®é¢˜ï¼Œæš‚æ—¶å¾—åˆ°è§£å†³ã€‚</p>

<h3 id="ç–‘æƒ‘ä¹‹å¤„">ç–‘æƒ‘ä¹‹å¤„</h3>

<p>å¿ƒé‡Œè¿˜æ˜¯å¾ˆå›°æƒ‘ï¼Œåˆå»çœ‹äº†ä¸‹å®˜æ–¹<code>ngx_http_proxy_module</code>é‡Œé¢å¯¹è¿™å‡ ä¸ªå‚æ•°çš„è§£é‡Š.</p>

<p><em>Noteï¼šä¸ºäº†æ–¹ä¾¿ç†è§£ï¼Œæˆ‘æŠŠproxied server ä»¥real serveræ›¿ä»£ï¼Œæ„æŒ‡upstream åç«¯çš„çœŸå®ä¸»æœºæˆ–æœåŠ¡.</em></p>

<p>å…ˆçœ‹ä¸‹è¿™å‡ ä¸ªçš„å®˜æ–¹è§£é‡Šï¼š
<code>proxy_connect_timeout:</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">Syntax:</span> <span style="color:#e6db74">proxy_connect_timeout</span> <span style="color:#e6db74">time</span>;
<span style="color:#66d9ef">Default:</span>        
<span style="color:#e6db74">proxy_connect_timeout</span> <span style="color:#e6db74">60s</span>;
<span style="color:#66d9ef">Context:</span>        <span style="color:#e6db74">http,</span> <span style="color:#e6db74">server,</span> <span style="color:#e6db74">location</span></code></pre></div>
<blockquote>
<p>Defines a timeout for establishing a connection with a proxied server. It should be noted that this timeout cannot usually exceed 75 seconds.</p>
</blockquote>

<p><em>å®šä¹‰ä¸€ä¸ªnginx ä¸real server å»ºç«‹é“¾æ¥çš„è¶…æ—¶æ—¶é—´,é€šå¸¸ä¸è¦è¶…è¿‡75ç§’.é»˜è®¤ï¼š60s</em></p>

<p><code>proxy_read_timeout:</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">Syntax:</span> <span style="color:#e6db74">proxy_read_timeout</span> <span style="color:#e6db74">time</span>;
<span style="color:#66d9ef">Default:</span>        
<span style="color:#e6db74">proxy_read_timeout</span> <span style="color:#e6db74">60s</span>;
<span style="color:#66d9ef">Context:</span>        <span style="color:#e6db74">http,</span> <span style="color:#e6db74">server,</span> <span style="color:#e6db74">location</span></code></pre></div>
<blockquote>
<p>Defines a timeout for reading a response from the proxied server. The timeout is set only between two successive read operations, not for the transmission of the whole response. If the proxied server does not transmit anything within this time, the connection is closed.</p>
</blockquote>

<p><em>å®šä¹‰ä¸€ä¸ªnginxç­‰å¾…real serverå“åº”æ•°æ®çš„è¶…æ—¶æ—¶é—´,è¶…æ—¶åªåœ¨ä¸¤æ¬¡è¿ç»­çš„è¯»æ“ä½œä¹‹é—´è®¾ç½®ï¼Œ
è€Œä¸æ˜¯ç”¨äºä¼ è¾“æ•´ä¸ªå“åº”ã€‚å¦‚æœreal serveråœ¨æ­¤æ—¶é—´å†…æ²¡æœ‰ä¼ è¾“ä»»ä½•å†…å®¹ï¼Œåˆ™è¿æ¥å°†å…³é—­ã€‚</em></p>

<p><code>proxy_send_timeout:</code></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">Syntax:</span> <span style="color:#e6db74">proxy_send_timeout</span> <span style="color:#e6db74">time</span>;
<span style="color:#66d9ef">Default:</span>        
<span style="color:#e6db74">proxy_send_timeout</span> <span style="color:#e6db74">60s</span>;
<span style="color:#66d9ef">Context:</span>        <span style="color:#e6db74">http,</span> <span style="color:#e6db74">server,</span> <span style="color:#e6db74">location</span></code></pre></div>
<blockquote>
<p>Sets a timeout for transmitting a request to the proxied server. The timeout is set only between two successive write operations, not for the transmission of the whole request. If the proxied server does not receive anything within this time, the connection is closed.</p>
</blockquote>

<p><em>å®šä¹‰ä¸€ä¸ªnginxå‘ real serverå‘é€è¯·æ±‚çš„è¶…æ—¶æ—¶é—´ï¼Œè¶…æ—¶åªåœ¨ä¸¤æ¬¡è¿ç»­å†™å…¥æ“ä½œä¹‹é—´è®¾ç½®,
è€Œä¸æ˜¯ç”¨äºä¼ è¾“æ•´ä¸ªè¯·æ±‚ï¼Œå¦‚æœreal serveråœ¨æ­¤æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä»»ä½•å†…å®¹ï¼Œåˆ™è¿æ¥å°†å…³é—­ã€‚</em></p>

<h3 id="åˆ†ææ—¥å¿—">åˆ†ææ—¥å¿—</h3>

<p>Note: <code>æµé‡æµå‘ç¤ºæ„ï¼š</code> <em>LB&ndash;&gt;Nginx&ndash;&gt;WebApp</em></p>

<h5 id="lb-æ—¥å¿—">LB æ—¥å¿—</h5>

<p>ç”±äºLB è¿™é‡Œæš‚æ—¶æœªæ¥å…¥æ—¥å¿—ï¼Œæ‰€ä»¥å¯¼è‡´è¿™é‡Œæ—¥å¿—ç¼ºå¤±ã€‚ä¹Ÿæ˜¯è¿ç»´å·¥ä½œçš„ä¸å®Œå–„ä¹‹å¤„ï¼æˆ‘ä»¬å…ˆä»ä¸‹é¢ä¸¤å±‚æ¥åˆ†æå§ï¼Œçœ‹èƒ½æ‰¾åˆ°çº¿ç´¢ä¸ã€‚</p>

<h5 id="nginx-æ—¥å¿—">Nginx æ—¥å¿—</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-nginx" data-lang="nginx"><span style="color:#66d9ef">1.1.1.1</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">[19/Jun/2018:11:13:08</span> <span style="color:#e6db74">+0800]</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">example.com</span> <span style="color:#e6db74">to:</span> <span style="color:#e6db74">unix:/var/www/example.com/shared/tmp/sockets/puma.sock:</span> <span style="color:#e6db74">&#34;GET</span> <span style="color:#e6db74">/p/dashboard</span> <span style="color:#e6db74">HTTP/1.1&#34;</span> <span style="color:#e6db74">-</span> <span style="color:#ae81ff">499</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">&#34;https://example.com/companies/b66962f4-d29d-49d2-bee0-76c85ce5af72/edit?referer=https%3A%2F%2Fexample.com%2Ffundings%2Ffunding_history%3Fcompany_id%3Db66962f4-d29d-49d2-bee0-76c85ce5af72&#34;</span> <span style="color:#e6db74">&#34;Mozilla/5.0</span> <span style="color:#e6db74">(Windows</span> <span style="color:#e6db74">NT</span> <span style="color:#ae81ff">6</span><span style="color:#e6db74">.3</span>; <span style="color:#66d9ef">WOW64)</span> <span style="color:#e6db74">AppleWebKit/537.36</span> <span style="color:#e6db74">(KHTML,</span> <span style="color:#e6db74">like</span> <span style="color:#e6db74">Gecko)</span> <span style="color:#e6db74">Chrome/67.0.3396.87</span> <span style="color:#e6db74">Safari/537.36&#34;</span>

<span style="color:#ae81ff">1</span><span style="color:#e6db74">.1.1.1</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">[19/Jun/2018:11:13:08</span> <span style="color:#e6db74">+0800]</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">example.com</span> <span style="color:#e6db74">to:</span> <span style="color:#e6db74">unix:/var/www/example.com/shared/tmp/sockets/puma.sock:</span> <span style="color:#e6db74">&#34;GET</span> <span style="color:#e6db74">/p/dashboard</span> <span style="color:#e6db74">HTTP/1.1&#34;</span> <span style="color:#e6db74">-</span> <span style="color:#ae81ff">499</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">&#34;https://example.com/companies/b66962f4-d29d-49d2-bee0-76c85ce5af72/edit?referer=https%3A%2F%2Fexample.com%2Ffundings%2Ffunding_history%3Fcompany_id%3Db66962f4-d29d-49d2-bee0-76c85ce5af72&#34;</span> <span style="color:#e6db74">&#34;Mozilla/5.0</span> <span style="color:#e6db74">(Windows</span> <span style="color:#e6db74">NT</span> <span style="color:#ae81ff">6</span><span style="color:#e6db74">.3</span>; <span style="color:#66d9ef">WOW64)</span> <span style="color:#e6db74">AppleWebKit/537.36</span> <span style="color:#e6db74">(KHTML,</span> <span style="color:#e6db74">like</span> <span style="color:#e6db74">Gecko)</span> <span style="color:#e6db74">Chrome/67.0.3396.87</span> <span style="color:#e6db74">Safari/537.36&#34;</span>

<span style="color:#ae81ff">1</span><span style="color:#e6db74">.1.1.1</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">[19/Jun/2018:11:32:48</span> <span style="color:#e6db74">+0800]</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">example.com</span> <span style="color:#e6db74">to:</span> <span style="color:#e6db74">unix:/var/www/example.com/shared/tmp/sockets/puma.sock:</span> <span style="color:#e6db74">&#34;GET</span> <span style="color:#e6db74">/p/dashboard</span> <span style="color:#e6db74">HTTP/1.1&#34;</span> <span style="color:#e6db74">-</span> <span style="color:#ae81ff">499</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">&#34;https://example.com/fundings/manage?funding_id=14990&#34;</span> <span style="color:#e6db74">&#34;Mozilla/5.0</span> <span style="color:#e6db74">(Windows</span> <span style="color:#e6db74">NT</span> <span style="color:#ae81ff">6</span><span style="color:#e6db74">.3</span>; <span style="color:#66d9ef">WOW64)</span> <span style="color:#e6db74">AppleWebKit/537.36</span> <span style="color:#e6db74">(KHTML,</span> <span style="color:#e6db74">like</span> <span style="color:#e6db74">Gecko)</span> <span style="color:#e6db74">Chrome/67.0.3396.87</span> <span style="color:#e6db74">Safari/537.36&#34;</span>

<span style="color:#ae81ff">1</span><span style="color:#e6db74">.1.1.1</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">[19/Jun/2018:11:37:21</span> <span style="color:#e6db74">+0800]</span> <span style="color:#e6db74">-</span> <span style="color:#e6db74">example.com</span> <span style="color:#e6db74">to:</span> <span style="color:#e6db74">unix:/var/www/example.com/shared/tmp/sockets/puma.sock:</span> <span style="color:#e6db74">&#34;GET</span> <span style="color:#e6db74">/p/dashboard</span> <span style="color:#e6db74">HTTP/1.1&#34;</span> <span style="color:#e6db74">-</span> <span style="color:#ae81ff">499</span> <span style="color:#ae81ff">0</span> <span style="color:#e6db74">&#34;https://example.com/fundings/manage?funding_id=14990&#34;</span> <span style="color:#e6db74">&#34;Mozilla/5.0</span> <span style="color:#e6db74">(Windows</span> <span style="color:#e6db74">NT</span> <span style="color:#ae81ff">6</span><span style="color:#e6db74">.3</span>; <span style="color:#66d9ef">WOW64)</span> <span style="color:#e6db74">AppleWebKit/537.36</span> <span style="color:#e6db74">(KHTML,</span> <span style="color:#e6db74">like</span> <span style="color:#e6db74">Gecko)</span> <span style="color:#e6db74">Chrome/67.0.3396.87</span> <span style="color:#e6db74">Safari/537.36&#34;</span></code></pre></div>
<h5 id="webåº”ç”¨æ—¥å¿—">Webåº”ç”¨æ—¥å¿—</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{<span style="color:#f92672">&#34;mddethod&#34;</span>:<span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#f92672">&#34;path&#34;</span>:<span style="color:#e6db74">&#34;/sp/dashboard&#34;</span>,<span style="color:#f92672">&#34;format&#34;</span>:<span style="color:#e6db74">&#34;html&#34;</span>,<span style="color:#f92672">&#34;controller&#34;</span>:<span style="color:#e6db74">&#34;Admin::DashboardController&#34;</span>,<span style="color:#f92672">&#34;action&#34;</span>:<span style="color:#e6db74">&#34;index&#34;</span>,<span style="color:#f92672">&#34;status&#34;</span>:<span style="color:#ae81ff">200</span>,<span style="color:#f92672">&#34;duration&#34;</span>:<span style="color:#ae81ff">66678.25</span>,<span style="color:#f92672">&#34;view&#34;</span>:<span style="color:#ae81ff">285.17</span>,<span style="color:#f92672">&#34;db&#34;</span>:<span style="color:#ae81ff">66380.07</span>,<span style="color:#f92672">&#34;params&#34;</span>:{},<span style="color:#f92672">&#34;referrer&#34;</span>:<span style="color:#e6db74">&#34;https://example.com/edit?referer=https%3A%2F%2Fexample.com%2Ffundings%2Ffunding_history%3Fcompany_id%3Db66962f4-d29d-49d2-bee0-76c85ce5af72&#34;</span>,<span style="color:#f92672">&#34;user_id&#34;</span>:<span style="color:#ae81ff">13314</span>,<span style="color:#f92672">&#34;session_id&#34;</span>:<span style="color:#e6db74">&#34;5e5a70a5401919c405114094ecad5967&#34;</span>,<span style="color:#f92672">&#34;time&#34;</span>:<span style="color:#e6db74">&#34;2018-06-19 11:12:18 +0800&#34;</span>,<span style="color:#f92672">&#34;headers&#34;</span>:<span style="color:#e6db74">&#34;#&lt;ActionDispatch::Http::Headers:0x007f0ca6c4b9e0&gt;&#34;</span>}

{<span style="color:#f92672">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#f92672">&#34;path&#34;</span>:<span style="color:#e6db74">&#34;/sp/dashboard&#34;</span>,<span style="color:#f92672">&#34;format&#34;</span>:<span style="color:#e6db74">&#34;html&#34;</span>,<span style="color:#f92672">&#34;controller&#34;</span>:<span style="color:#e6db74">&#34;Admin::DashboardController&#34;</span>,<span style="color:#f92672">&#34;action&#34;</span>:<span style="color:#e6db74">&#34;index&#34;</span>,<span style="color:#f92672">&#34;status&#34;</span>:<span style="color:#ae81ff">200</span>,<span style="color:#f92672">&#34;duration&#34;</span>:<span style="color:#ae81ff">66556.56</span>,<span style="color:#f92672">&#34;view&#34;</span>:<span style="color:#ae81ff">355.28</span>,<span style="color:#f92672">&#34;db&#34;</span>:<span style="color:#ae81ff">66188.07</span>,<span style="color:#f92672">&#34;params&#34;</span>:{},<span style="color:#f92672">&#34;referrer&#34;</span>:<span style="color:#e6db74">&#34;https://example.com/edit?referer=https%3A%2F%2Fexample.com%2Ffundings%2Ffunding_history%3Fcompany_id%3Db66962f4-d29d-49d2-bee0-76c85ce5af72&#34;</span>,<span style="color:#f92672">&#34;user_id&#34;</span>:<span style="color:#ae81ff">13314</span>,<span style="color:#f92672">&#34;session_id&#34;</span>:<span style="color:#e6db74">&#34;5e5a70a5401919c405114094ecad5967&#34;</span>,<span style="color:#f92672">&#34;time&#34;</span>:<span style="color:#e6db74">&#34;2018-06-19 11:12:18 +0800&#34;</span>,<span style="color:#f92672">&#34;headers&#34;</span>:<span style="color:#e6db74">&#34;#&lt;ActionDispatch::Http::Headers:0x007f0ca1cd2ee0&gt;&#34;</span>}

{<span style="color:#f92672">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#f92672">&#34;path&#34;</span>:<span style="color:#e6db74">&#34;/sp/dashboard&#34;</span>,<span style="color:#f92672">&#34;format&#34;</span>:<span style="color:#e6db74">&#34;html&#34;</span>,<span style="color:#f92672">&#34;controller&#34;</span>:<span style="color:#e6db74">&#34;Admin::DashboardController&#34;</span>,<span style="color:#f92672">&#34;action&#34;</span>:<span style="color:#e6db74">&#34;index&#34;</span>,<span style="color:#f92672">&#34;status&#34;</span>:<span style="color:#ae81ff">200</span>,<span style="color:#f92672">&#34;duration&#34;</span>:<span style="color:#ae81ff">64519.48</span>,<span style="color:#f92672">&#34;view&#34;</span>:<span style="color:#ae81ff">326.36</span>,<span style="color:#f92672">&#34;db&#34;</span>:<span style="color:#ae81ff">64181.76</span>,<span style="color:#f92672">&#34;params&#34;</span>:{},<span style="color:#f92672">&#34;referrer&#34;</span>:<span style="color:#e6db74">&#34;https://example.com/manage?funding_id=14990&#34;</span>,<span style="color:#f92672">&#34;user_id&#34;</span>:<span style="color:#ae81ff">13314</span>,<span style="color:#f92672">&#34;session_id&#34;</span>:<span style="color:#e6db74">&#34;5e5a70a5401919c405114094ecad5967&#34;</span>,<span style="color:#f92672">&#34;time&#34;</span>:<span style="color:#e6db74">&#34;2018-06-19 11:31:58 +0800&#34;</span>,<span style="color:#f92672">&#34;headers&#34;</span>:<span style="color:#e6db74">&#34;#&lt;ActionDispatch::Http::Headers:0x007f0c6b4f28a0&gt;&#34;</span>}

{<span style="color:#f92672">&#34;method&#34;</span>:<span style="color:#e6db74">&#34;GET&#34;</span>,<span style="color:#f92672">&#34;path&#34;</span>:<span style="color:#e6db74">&#34;/sp/dashboard&#34;</span>,<span style="color:#f92672">&#34;format&#34;</span>:<span style="color:#e6db74">&#34;html&#34;</span>,<span style="color:#f92672">&#34;controller&#34;</span>:<span style="color:#e6db74">&#34;Admin::DashboardController&#34;</span>,<span style="color:#f92672">&#34;action&#34;</span>:<span style="color:#e6db74">&#34;index&#34;</span>,<span style="color:#f92672">&#34;status&#34;</span>:<span style="color:#ae81ff">200</span>,<span style="color:#f92672">&#34;duration&#34;</span>:<span style="color:#ae81ff">64343.34</span>,<span style="color:#f92672">&#34;view&#34;</span>:<span style="color:#ae81ff">299.02</span>,<span style="color:#f92672">&#34;db&#34;</span>:<span style="color:#ae81ff">64032.83</span>,<span style="color:#f92672">&#34;params&#34;</span>:{},<span style="color:#f92672">&#34;referrer&#34;</span>:<span style="color:#e6db74">&#34;https://example.com/manage?funding_id=14990&#34;</span>,<span style="color:#f92672">&#34;user_id&#34;</span>:<span style="color:#ae81ff">13314</span>,<span style="color:#f92672">&#34;session_id&#34;</span>:<span style="color:#e6db74">&#34;5e5a70a5401919c405114094ecad5967&#34;</span>,<span style="color:#f92672">&#34;time&#34;</span>:<span style="color:#e6db74">&#34;2018-06-19 11:36:31 +0800&#34;</span>,<span style="color:#f92672">&#34;headers&#34;</span>:<span style="color:#e6db74">&#34;#&lt;ActionDispatch::Http::Headers:0x007f0c10e0d670&gt;&#34;</span>}</code></pre></div>
<p>ä»”ç»†è§‚å¯Ÿä¸€ä¸‹nginx å’Œ web åº”ç”¨çš„æ—¥å¿—å¯ä»¥çœ‹å‡º2æ¡çº¿ç´¢ï¼š
* å…³äºè¿™ä¸ªé¡µé¢çš„æ—¥è®°å½•å¿—å“åº”codeåŸºæœ¬éƒ½æ˜¯499ï¼Œ
499 åˆç§°ä¸ºå®¢æˆ·ç«¯ç³»åˆ—çš„é”™è¯¯ä»£ç ï¼Œä¸€èˆ¬æ˜¯å®¢æˆ·ç«¯åœ¨ä¸æœåŠ¡å™¨å»ºç«‹è¿æ¥æ—¶ï¼Œå®¢æˆ·ç«¯å¦‚æœåœ¨
æŒ‡å®šæ—¶é—´å†…æ¥æ”¶ä¸åˆ°æœåŠ¡å™¨çš„å“åº”ï¼Œä¾¿ä¼šä¸»åŠ¨å…³é—­ä¸»åŠ¨å…³é—­è¿™ä¸ªè¿æ¥ï¼Œè¿™æ—¶nginxæœåŠ¡å™¨ä¾¿ä¼š
è®°å½•ä¸€ä¸ª499 è®°å½•ã€‚
* web appé‡Œçš„æ—¥å¿—å’Œ nginx é‡Œé¢çš„æ—¥å¿—è®°å½•æ—¶é—´ç›¸å·® 50s
ä»”ç»†è§‚å¯Ÿä¸‹æ—¶é—´ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒåŒä¸€æ¡è¯·æ±‚åœ¨æµå‘æœ€ç»ˆwebåº”ç”¨æ—¶ï¼Œä»¥åŠåº”ç”¨æ¥æ”¶åˆ°çš„è¯·æ±‚æ—¶é—´ï¼Œå’Œnginx å‡ºç°499æ—¥å¿—è®°å½•çš„æ—¶é—´ï¼Œä¸­é—´éƒ½æ˜¯ç›¸å·®äº†50ç§’ã€‚æ‹¿2ä¸ªæ–‡ä»¶çš„ç¬¬ä¸€æ¡æ—¥å¿—æ¥è¯´ï¼Œwebappåœ¨<code>11:12:18</code>æ—¶é—´æ®µæ¥æ”¶åˆ°nginxçš„è¯·æ±‚ï¼Œç„¶è€Œwebappæ•´ä¸ªå¤„ç†å®Œè¯·æ±‚åï¼Œç”¨äº†<code>66678.25ms</code>, å³66ç§’ï¼Œè€Œnginxæ—¥å¿—åœ¨å‘ç»™webappè¯·æ±‚åˆ°ç¬¬50ç§’æ—¶ï¼Œå³ <code>11:13:08</code> æ—¶é—´åï¼Œå‡ºç°äº†ä¸€æ¡499çš„æ—¥å¿—ï¼Œä¹Ÿå°±æ˜¯è¯´å®¢æˆ·ç«¯åœ¨æŒ‡å®šæ—¶é—´å†…æ²¡æœ‰å¾—åˆ°nginx server çš„å“åº”ï¼Œä¸»åŠ¨æ–­å¼€äº†ä¸å®ƒçš„é“¾æ¥ã€‚è¿™ä¸ªæ—¶é—´åº”è¯¥æ˜¯è®¾ç½®çš„<code>50s</code>ã€‚</p>

<p>å¤§è‡´çš„åˆ†æä¹‹åï¼Œæ˜¯ä¸æ˜¯å°±æ¸…æ™°äº†å¾ˆå¤šå‘¢? ä½†å¤§å®¶ä¹Ÿè®¸ä¼šç–‘æƒ‘äº†ï¼Œä¸€å¼€å§‹å‡ºç°çš„é—®é¢˜ç°è±¡ï¼Œä¸æ˜¯
è®¿é—®è¿™ä¸ªé¡µé¢æ…¢ï¼Œä¼šå‡ºç°504 timeoutçš„æç¤ºä¹ˆï¼Œæ€ä¹ˆè¿™ä¼šåˆæˆäº†499 çš„é”™è¯¯æç¤ºäº†å‘¢ï¼Ÿè¿™ä¸»è¦å› ä¸ºæˆ‘å¿˜è®°äº†æŠŠæœ€å‰é¢çš„LBç®—è¿›æ¥ã€‚
å› ä¸ºæ‰€æœ‰æµé‡éƒ½è¦è¿™æ ·èµ°ï¼Œ<code>User Browser --&gt; Cloud LB --&gt; Nginx --&gt; Web App</code> . åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œ
LB å¯¹äºnginx æ¥è¯´ï¼Œå®ƒå°±æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯(client), æ‰€ä»¥è¿™ä¸ª499 æ˜¯é’ˆå¯¹LBçš„è®¿é—®è€Œè¿”å›çš„ã€‚è€ŒLBè¿™é‡Œè®¾ç½®äº†è¶…æ—¶æ—¶é—´åˆšå¥½æ˜¯50ç§’(æ£€æŸ¥å¾—çŸ¥)ï¼Œæ‰€ä»¥ï¼Œ
è¿‡äº†50ç§’åï¼Œå¦‚æœnginx è¿˜ä¸èƒ½è¿”å›æ•°æ®ç»™LBï¼Œé‚£ä¹ˆLBå°±ä¼šä¸»åŠ¨æ–­å¼€ï¼Œå¹¶ä¸”è¿”ç»™æœ€ç»ˆUser Browser
&ldquo;504 Timeout&rdquo;.</p>

<p>è‡³æ­¤ï¼ŒåŸºæœ¬ä¸Šç”¨åŸç†è§£é‡Šäº†ä¸ºä»€ä¹ˆä¼šæœ‰504ã€499 ä¸åŒçš„httpå“åº”codeã€‚
é‚£ä¹ˆé—®é¢˜åˆå›æ¥äº†ï¼Œä¸ºä»€ä¹ˆè®¾ç½®äº† <code>proxy_connect_timeout</code>åï¼Œå¯ä»¥æ­£å¸¸è®¿é—®äº†ï¼Ÿ
è¿™é‡Œå…¶å®æ˜¯ä¸€ä¸ªä¹Œé¾™ï¼Œåœ¨ä¿®æ”¹å®Œnginxé…ç½®åï¼Œå…¶å®ä¸šåŠ¡åŒäº‹åœ¨ç»§ç»­æµ‹è¯•ä¸‹ï¼Œç½‘é¡µè®¿é—®å¯ä»¥æ­£å¸¸åŠ è½½ï¼Œ
è¿™åˆšå¥½è¯´æ˜äº†åœ¨dbé‚£å—ï¼Œæ°å¥½è¿™ä¸ªæŸ¥è¯¢æ˜¯æ²¡æœ‰è€—æ—¶ï¼Œæˆ–è€…è¯´æœ‰è€—æ—¶ä½†æ²¡æœ‰å½±å“æ•´ä½“çš„è¯·æ±‚è®¿é—®ã€‚æ²¡æœ‰è¾¾åˆ°LBè®¾ç½®çš„50ç§’ï¼Œ
ä¹Ÿå°±ä¸ä¼šå‡ºç°Gateway timeoutã€‚åªæ˜¯å¶å°”ä¼šå‡ºç°æŸ¥è¯¢è¶…æ—¶æ‰ä¼šå¯¼è‡´LBè¿”å›504 ç»™æœ€ç»ˆuserï¼ˆbrowserï¼‰.</p>

<h3 id="ç»“è®º">ç»“è®º</h3>

<p>æœ€ç»ˆçš„ä¸´æ—¶è§£å†³æ–¹æ¡ˆæ˜¯<code>æŠŠLBçš„è¶…æ—¶æ—¶é—´è®¾ç½®å¤§äº50sï¼Œæ ¹æ®ä¸šåŠ¡éœ€è¦ï¼Œä¿®æ”¹æˆäº†2åˆ†é’Ÿ.</code>åç»­å¯èƒ½ä¼šé…åˆä¸šåŠ¡é’ˆå¯¹db è¿›è¡Œäº›ä¼˜åŒ–å§ã€‚</p>

<h3 id="å‚è€ƒ">å‚è€ƒï¼š</h3>

<ul>
<li><a href="http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_connect_timeout">nginx æ¨¡å—http_proxy_module å®˜æ–¹ä»‹ç»</a></li>
<li><a href="https://en.wikipedia.org/wiki/List_of_HTTP_status_codes#4xx_Client_errors">HTTP å“åº”code</a></li>
</ul></article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://aliasmee.github.io/tags/nginx"><span class="tag">Nginx</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/gateway"><span class="tag">Gateway</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/504"><span class="tag">504</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/proxy_connect_timeout"><span class="tag">Proxy_connect_timeout</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/load-blancer"><span class="tag">Load Blancer</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        Â© This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International Licenseï¼Œplease give source if you wish to quote or reproduce.This post was published <strong>383</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.
      </p>
    </footer>
    
      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aliasmee" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    
  </section>
  <footer class="site-footer">
  <p>Â© 2017-2019 aliasmee&#39;s blog </p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="https://aliasmee.github.io/js/bundle.d1288006cf.js"></script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-120538012-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>





  </body>
</html>
