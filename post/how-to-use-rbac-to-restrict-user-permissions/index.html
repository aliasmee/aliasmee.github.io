<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8" />

  
  <title>How to Use RBAC to Restrict User Permissions On Kubernetes</title>

  
  





  
  <meta name="author" content="aliasmee" />
  <meta name="description" content="kubernetesé›†ç¾¤åˆ›å»ºå¥½äº†ä¹‹åï¼Œé»˜è®¤kubeconfigæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç›¸å½“äºDBçš„è¶…çº§ç®¡ç†å‘˜ã€‚æƒé™è¶³ä»¥æ‘§æ¯æ•´ä¸ªkubernetes é›†ç¾¤ï¼ä½†å¦‚æœå…¶å®ƒçš„åŒäº‹ä¹Ÿæƒ³ä½¿ç”¨kubectlå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œè¿›è¡Œä¸€äº›ç®€å•æ“ä½œï¼Œä½œä¸ºé›†ç¾¤adminï¼Œæˆ‘ä»¬è¯¥æ€æ ·åšå‘¢ï¼Ÿ

" />

  
  
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@aliasmeee" />
    <meta name="twitter:title" content="How to Use RBAC to Restrict User Permissions On Kubernetes" />
    <meta name="twitter:description" content="kubernetesé›†ç¾¤åˆ›å»ºå¥½äº†ä¹‹åï¼Œé»˜è®¤kubeconfigæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç›¸å½“äºDBçš„è¶…çº§ç®¡ç†å‘˜ã€‚æƒé™è¶³ä»¥æ‘§æ¯æ•´ä¸ªkubernetes é›†ç¾¤ï¼ä½†å¦‚æœå…¶å®ƒçš„åŒäº‹ä¹Ÿæƒ³ä½¿ç”¨kubectlå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œè¿›è¡Œä¸€äº›ç®€å•æ“ä½œï¼Œä½œä¸ºé›†ç¾¤adminï¼Œæˆ‘ä»¬è¯¥æ€æ ·åšå‘¢ï¼Ÿ

" />
    <meta name="twitter:image" content="https://aliasmee.github.io/media/posts/how-to-use-RBAC-to-restrict-user-permissions/cover.png" />
  

  
  <meta property="og:type" content="article" />
  <meta property="og:title" content="How to Use RBAC to Restrict User Permissions On Kubernetes" />
  <meta property="og:description" content="kubernetesé›†ç¾¤åˆ›å»ºå¥½äº†ä¹‹åï¼Œé»˜è®¤kubeconfigæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç›¸å½“äºDBçš„è¶…çº§ç®¡ç†å‘˜ã€‚æƒé™è¶³ä»¥æ‘§æ¯æ•´ä¸ªkubernetes é›†ç¾¤ï¼ä½†å¦‚æœå…¶å®ƒçš„åŒäº‹ä¹Ÿæƒ³ä½¿ç”¨kubectlå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œè¿›è¡Œä¸€äº›ç®€å•æ“ä½œï¼Œä½œä¸ºé›†ç¾¤adminï¼Œæˆ‘ä»¬è¯¥æ€æ ·åšå‘¢ï¼Ÿ

" />
  <meta property="og:url" content="https://aliasmee.github.io/post/how-to-use-rbac-to-restrict-user-permissions/" />
  <meta property="og:image" content="https://aliasmee.github.io/media/posts/how-to-use-RBAC-to-restrict-user-permissions/cover.png" />




<meta name="generator" content="Hugo 0.41" />


<link rel="canonical" href="https://aliasmee.github.io/post/how-to-use-rbac-to-restrict-user-permissions/" />
<link rel="alternative" href="https://aliasmee.github.io/index.xml" title="aliasmee&#39;s blog " type="application/atom+xml" />


<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<meta name="format-detection" content="telephone=no,email=no,adress=no" />
<meta http-equiv="Cache-Control" content="no-transform" />


<meta name="robots" content="index,follow" />
<meta name="referrer" content="origin-when-cross-origin" />
<meta name="google-site-verification" content="dOpqXJeKRrCfsEkfUcoR0Ys0_e1wZ_-sZi_zoDpoc_c" />






<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
<meta name="apple-mobile-web-app-title" content="aliasmee&#39;s blog " />
<meta name="msapplication-tooltip" content="aliasmee&#39;s blog " />
<meta name='msapplication-navbutton-color' content="#5fbf5e" />
<meta name="msapplication-TileColor" content="#5fbf5e" />
<meta name="msapplication-TileImage" content="/img/tile-image-windows.png" />
<link rel="icon" href="https://aliasmee.github.io/img/favicon.ico" />
<link rel="icon" type="image/png" sizes="16x16" href="https://aliasmee.github.io/img/favicon-16x16.png" />
<link rel="icon" type="image/png" sizes="32x32" href="https://aliasmee.github.io/img/favicon-32x32.png" />
<link rel="icon" sizes="192x192" href="https://aliasmee.github.io/img/touch-icon-android.png" />
<link rel="apple-touch-icon" href="https://aliasmee.github.io/img/touch-icon-apple.png" />
<link rel="mask-icon" href="https://aliasmee.github.io/img/safari-pinned-tab.svg" color="#5fbf5e" />



<link rel="stylesheet" href="//cdn.bootcss.com/video.js/6.2.8/alt/video-js-cdn.min.css" />

<link rel="stylesheet" href="https://aliasmee.github.io/css/bundle.ff02473a9a.css" />


  
  <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <script src="//cdn.bootcss.com/video.js/6.2.8/ie8/videojs-ie8.min.js"></script>
  <![endif]-->

<!--[if lte IE 11]>
    <script src="//cdn.bootcss.com/classlist/1.1.20170427/classList.min.js"></script>
  <![endif]-->


<script src="//cdn.bootcss.com/object-fit-images/3.2.3/ofi.min.js"></script>


<script src="//cdn.bootcss.com/smooth-scroll/12.1.4/js/smooth-scroll.polyfills.min.js"></script>


</head>
  <body>
    
    <div class="suspension">
      <a title="Go to top" class="to-top is-hide"><span class="icon icon-up"></span></a>
      
        
        <a title="Go to comments" class="to-comment" href="#disqus_thread"><span class="icon icon-comment"></span></a>
        
      
    </div>
    
    
  <header class="site-header">
  <img class="avatar" src="https://aliasmee.github.io/img/avatar.jpg" alt="Avatar">
  
  <h2 class="title">aliasmee&#39;s blog </h2>
  
  <p class="subtitle">DevOps | Kubernetes | Docker | Cloud | CICD </p>
  <button class="menu-toggle" type="button">
    <span class="icon icon-menu"></span>
  </button>
  <nav class="site-menu collapsed">
    <h2 class="offscreen">Main Menu</h2>
    <ul class="menu-list">
      
      
      
      
        <li class="menu-item
            
            
            
              is-active
            ">
            <a href="https://aliasmee.github.io/">æ–‡å­—</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://github.com/aliasmee">GitHub</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://aliasmee.github.io/tags/">Tags</a>
          </li>
      
        <li class="menu-item
            
            
            ">
            <a href="https://aliasmee.github.io/about/">About Me</a>
          </li>
      
    </ul>
  </nav>
  <nav class="social-menu collapsed">
    <h2 class="offscreen">Social Networks</h2>
    <ul class="social-list">

      
      <li class="social-item">
        <a href="mailto:name@domain.com" title="Email"><span class="icon icon-email"></span></a>
      </li>

      
      <li class="social-item">
        <a href="//github.com/aliasmee" title="GitHub"><span class="icon icon-github"></span></a>
      </li>

      <li class="social-item">
        <a href="//twitter.com/aliasmeee" title="Twitter"><span class="icon icon-twitter"></span></a>
      </li>

      

      

      

      

      

      

      

      

      

      

      

      

      

      <li class="social-item">
        <a href="https://aliasmee.github.io/img/qrcode.jpg" title="Wechat"><span class="icon icon-wechat"></span></a>
      </li>

      <li class="social-item">
        <a href="//www.linkedin.com/in/linkedin_username" title="Linkedin"><span class="icon icon-linkedin"></span></a>
      </li>

      

      

      

      <li class="social-item">
        <a href="https://aliasmee.github.io/index.xml"><span class="icon icon-rss" title="RSS"></span></a>
      </li>

    </ul>
  </nav>
</header>

  <section class="main post-detail">
    <header class="post-header">
      <h1 class="post-title">How to Use RBAC to Restrict User Permissions On Kubernetes</h1>
      <p class="post-meta">@aliasmee Â· Sep 5, 2019 Â· 3 min read</p>
    </header>
    <article class="post-content"><p>kubernetesé›†ç¾¤åˆ›å»ºå¥½äº†ä¹‹åï¼Œé»˜è®¤kubeconfigæ–‡ä»¶ä¸­çš„ç”¨æˆ·ç›¸å½“äºDBçš„è¶…çº§ç®¡ç†å‘˜ã€‚æƒé™è¶³ä»¥æ‘§æ¯æ•´ä¸ªkubernetes
é›†ç¾¤ï¼ä½†å¦‚æœå…¶å®ƒçš„åŒäº‹ä¹Ÿæƒ³ä½¿ç”¨kubectlå·¥å…·ï¼Œåœ¨å‘½ä»¤è¡Œè¿›è¡Œä¸€äº›ç®€å•æ“ä½œï¼Œä½œä¸ºé›†ç¾¤adminï¼Œæˆ‘ä»¬è¯¥æ€æ ·åšå‘¢ï¼Ÿ</p>

<p></p>

<h3 id="å°å°éœ€æ±‚">å°å°éœ€æ±‚</h3>

<p>å¦‚åºè¨€æåˆ°çš„ï¼Œåœ¨å®é™…ä½¿ç”¨k8sä¸­ï¼Œæœ‰äº›å¼€å‘åŒå­¦ä¹Ÿæƒ³ç›´æ¥åœ¨è‡ªå·±çš„ç»ˆç«¯å‘½ä»¤è¡Œä¸Šå¯¹æœåŠ¡è¿›è¡Œä¸€äº›ç®€å•æ“ä½œã€‚å¦‚æŸ¥çœ‹æŸä¸ª
æœåŠ¡çš„æ—¥å¿—ï¼Œæˆ–è¿›åˆ°å®¹å™¨é‡Œæ‰§è¡Œä¸€äº›ad-hocå‘½ä»¤ã€‚</p>

<h3 id="ä»”ç»†çš„åˆ†æ">ä»”ç»†çš„åˆ†æ</h3>

<p>ä»æœ€æ—©ç”¨å®¹å™¨é›†ç¾¤ï¼Œè™½ç„¶çŸ¥é“ä¸€äº›å…³äºRBACçš„æ¦‚å¿µï¼Œä½†ä¸€ç›´æ²¡æœ‰ä¸Šæ‰‹å®è·µè¿‡ï¼Œåœ¨æˆ‘è®°å¿†é‡Œï¼Œå°±æŠŠå®ƒè®°æˆæ˜¯åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶ã€‚ğŸ˜‚
å› ä¸ºæˆ‘ä¹‹å‰ä¸€ç›´æ²¡å½»åº•ææ¸…æ¥šåœ¨kubernetesä¸­ï¼Œè¿™ä¸ªå®ä½“ç”¨æˆ·ï¼ˆUserï¼‰æ˜¯æ€ä¹ˆæ¥çš„ã€‚</p>

<p>ä»Šå¤©ç»è¿‡ä¸€äº›æ“ä½œå®è·µåï¼Œæ¥åˆ†äº«ä¸€äº›å…³äºRBACçš„çŸ¥è¯†ã€‚</p>

<h3 id="å…ˆçœ‹ä¸‹-authentication-who">å…ˆçœ‹ä¸‹ Authenticationï¼Œ Whoï¼Ÿ</h3>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨Kubernetesä¸­ï¼Œæ‰€æœ‰çš„æ“ä½œåŸºæœ¬éƒ½ç¦»ä¸å¼€API Serverï¼ŒåŒ…æ‹¬é›†ç¾¤å†…éƒ¨å„èŠ‚ç‚¹ä¸Šç»„ä»¶çš„äº¤äº’ä»¥åŠkubectlå®¢æˆ·ç«¯
çš„æ“ä½œã€‚</p>

<p>å½“API Serveræ¥æ”¶åˆ°ä¸€ä¸ªè¯·æ±‚ï¼Œå®ƒä¼šæŸ¥æ‰¾å½“å‰é›†ç¾¤é…ç½®çš„<code>è®¤è¯(Authentication)</code>æ’ä»¶,å¹¶ä»è¯·æ±‚ä¸­æå–ä¸€äº›ä¿¡æ¯ï¼Œå¦‚User IDã€Usernameï¼Œå¦‚æœ
è®¤è¯é€šè¿‡ï¼Œå°†ä¼šç»§ç»­åˆ°<code>æˆæƒ(Authorization)</code>é˜¶æ®µã€‚ä»¥æ­¤æŸ¥çœ‹è¯¥ç”¨æˆ·çš„ç›¸å¯¹åº”çš„æƒé™ã€‚èƒ½å¯¹å“ªäº›èµ„æºåšå“ªäº›æ“ä½œã€‚</p>

<p>kubernetesæ”¯æŒçš„<code>è®¤è¯æ’ä»¶</code>æœ‰ä»¥ä¸‹å‡ ç§ï¼Œé€šè¿‡è¿™å‡ ç§æ–¹å¼å¯ä»¥è·å–åˆ°ç”¨æˆ·ä¿¡æ¯ï¼š</p>

<ul>
<li>å®¢æˆ·ç«¯è¯ä¹¦</li>
<li>HTTP token</li>
<li>Basic HTTP authentication</li>
<li>Otherï¼ˆLDAPï¼‰</li>
</ul>

<h4 id="ç”¨æˆ·-å’Œ-ç»„"><code>ç”¨æˆ·</code> å’Œ <code>ç»„</code></h4>

<p>åœ¨k8sä¸­ï¼Œåªä¼šå¯¹è®¤è¯ä¹‹åçš„ç”¨æˆ·åšæ£€éªŒï¼Œå†³å®šå®ƒå¯ä»¥å®Œæˆå“ªäº›å’Œä¸èƒ½å®Œæˆå“ªäº›å·¥ä½œã€‚k8sé›†ç¾¤ä¸å­˜å‚¨è¿™äº›ç”¨æˆ·ä¿¡æ¯ã€‚</p>

<p>é™¤é›†ç¾¤è‡ªå¸¦ç»„ä»¶å¤–ï¼Œä¸kubernetes API server è¿æ¥çš„å®¢æˆ·ç«¯è¿˜æœ‰ä¸¤ç§ç±»å‹:
* å®é™…çš„ç”¨æˆ·ï¼ˆUsersï¼‰
* Podsï¼ˆpodå†…è¿è¡Œçš„åº”ç”¨ç¨‹åºï¼‰</p>

<p>ä»–ä»¬æ˜¯æœ‰åŒºåˆ«çš„ã€‚Pods è®¤è¯å¯ä»¥è°ƒç”¨ServiceAccountsï¼ˆaka SAï¼‰èµ„æºï¼ŒSAå¯ä»¥ç›´æ¥åˆ›å»ºå¹¶ä»¥<code>ServiceAccount</code>èµ„æºå­˜å‚¨åœ¨é›†ç¾¤é‡Œã€‚
è€Œ User è´¦æˆ·æ˜¯ä¸èƒ½é€šè¿‡API server æ¥è¿›è¡Œå¢åˆ æ”¹æŸ¥çš„ã€‚Users ç±»å‹çš„è®¤è¯å¯ä»¥ç”±å…¶å®ƒé¢å¤–çš„SSOç³»ç»Ÿæ¥æä¾›ï¼Œå¦‚ä¸Šé¢æåˆ°çš„ldapç³»ç»Ÿï¼Œæˆ–è€…httpåŸºæœ¬è®¤è¯ã€‚</p>

<h4 id="serviceaccounts">ServiceAccounts</h4>

<p>ç®€å•è¯´ä¸‹saï¼Œåœ¨æ¯ä¸ªnamespaceä¸‹ï¼Œéƒ½æœ‰ä¸€ä¸ªåä¸º<code>default</code>çš„ serviceaccountèµ„æºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºçš„
æ¯ä¸ªpod,éƒ½ä¼šè‡ªåŠ¨æŒ‚è½½è¿™ä¸ªserviceaccountåˆ›å»ºçš„secret åˆ°å®¹å™¨è·¯å¾„ä¸‹ï¼š<code>/var/run/secrets/kubernetes.io/serviceaccount/</code>ã€‚</p>

<p>å½“è¯¥pod å»ä¸API Serveräº¤äº’æ—¶ï¼Œä¾¿ä¼šä»¥è¯¥namespaceä¸‹é»˜è®¤çš„saè´¦æˆ·å»åšè®¤è¯ã€‚é»˜è®¤åœ¨å¯ç”¨rbacæˆæƒæ’ä»¶çš„æƒ…å†µä¸‹ï¼Œè¯¥saæ˜¯æ²¡æœ‰ä»€ä¹ˆæƒé™çš„ã€‚
è¿™æ—¶æˆ‘ä»¬å°±å¯ä»¥å•ç‹¬çš„åˆ›å»ºå±äºè¯¥podçš„ServiceAccounts èµ„æºï¼Œå¹¶åˆ›å»ºç›¸å¯¹åº”çš„roleä»¥åŠrolebindingç»‘å®šè¯¥serviceaccountå»åšæˆæƒã€‚</p>

<h3 id="å†æ¥çœ‹çœ‹æˆæƒ-authorization-what-can-be-done">å†æ¥çœ‹çœ‹æˆæƒ(Authorization)ï¼ŒWhat can be done ï¼Ÿ</h3>

<p>åœ¨kubernetesä¸­ï¼ŒAPI Server å¯ä»¥æˆæƒè®¤è¯é€šè¿‡çš„ç”¨æˆ·å¯ä»¥åšå“ªäº›äº‹æƒ…ã€‚API server å¯¹å¤–æš´éœ²RESTæ¥å£ï¼Œç”¨æˆ·é€šè¿‡å‘é€
ç›¸å…³çš„HTTP è¯·æ±‚åˆ° API Serverä¸Šã€‚åœ¨è®¤è¯æ–¹é¢å°±æ˜¯çœ‹ç”¨æˆ·å‘é€è¯·æ±‚æ—¶æºå¸¦çš„å‡­æ®ï¼ˆtokenã€username&amp;passwordã€å®¢æˆ·ç«¯è¯ä¹¦ï¼‰</p>

<p>æˆ‘ä»¬çŸ¥é“ï¼Œkubernetesé›†ç¾¤ä¸­ï¼Œå‡ ä¹æŠŠä¸Šå±‚æ‰€æœ‰çš„<code>ç»„ä»¶</code>éƒ½å®šä¹‰æˆèµ„æºã€‚è€Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™äº›èµ„æºè¿›è¡Œçš„æ“ä½œä¸å¤–ä¹
å¢åˆ æ”¹æŸ¥ã€‚æ¯”å¦‚ï¼š</p>

<ul>
<li>åˆ—å‡ºpods</li>
<li>æŸ¥çœ‹podsæ—¥å¿—</li>
<li>åˆ›å»ºService</li>
<li>åˆ é™¤ä¸€ä¸ªèŠ‚ç‚¹ï¼ˆnodeï¼‰
ç­‰ç­‰&hellip;</li>
</ul>

<h4 id="ä»‹ç»ä¸‹-rbacæ’ä»¶">ä»‹ç»ä¸‹ RBACæ’ä»¶</h4>

<p>RBACæ˜¯åŸºäº<code>ç”¨æˆ·è§’è‰²</code>ä½œä¸ºå†³å®šè¯¥ç”¨æˆ·å¯ä»¥å¯¹<code>å“ªäº›èµ„æº</code> <code>å®Œæˆå“ªäº›æ“ä½œ</code>.</p>

<p>é…ç½®RBAC è§„åˆ™å¯ä»¥é€šè¿‡ä»¥ä¸‹4ç§èµ„æºï¼Œä»¥å¯æ“ä½œçš„èµ„æºçº§åˆ«æ¥è¯´ï¼Œå¯åˆ†ä¸ºä¸¤ç§ï¼š</p>

<ul>
<li>Roles &amp; ClusterRoles: å¯¹å“ªäº›èµ„æºå¯ä»¥åšå“ªäº›æ“ä½œ</li>
<li>RoleBindings &amp; ClusterRoleBindings: ç»‘å®šRoleæˆ–ClusterRoleåˆ°æŒ‡å®šçš„userã€groupæˆ–è€…SA.</li>
</ul>

<p>ä»åå­—ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºClusterRolesæ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºã€‚ï¼ˆæ¯”å¦‚ï¼šnamespacesã€nodesã€pvç­‰èµ„æº)ã€‚æƒ³è¯¦ç»†äº†è§£å…¶å®ƒèµ„æºå¯ä»¥é€šè¿‡
ä»¥ä¸‹å‘½ä»¤è¿›è¡ŒæŸ¥çœ‹:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl api-resources | grep false</code></pre></div>
<p>è€Œ Roles è¿™æ˜¯å±äºnamespaceé‡Œé¢çš„èµ„æºï¼ˆæ¯”å¦‚ï¼špodã€serviceã€ingressã€pvcç­‰èµ„æºï¼‰</p>

<p>Role/ClusterRoleã€ClusterRole/ClusterRoleBindingså’Œç”¨æˆ·çš„å…³ç³»å¯ä»¥é€šè¿‡ä¸‹å›¾æ¥æ¦‚æ‹¬ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">who --&gt; User / SA / Group
       | |
       | |
        V
 RoleBindings / ClusterRoleBindings
       ^^
       <span style="color:#f92672">||</span>
       <span style="color:#f92672">||</span>
 what can to <span style="color:#66d9ef">do</span> --&gt; Cluster resource and Verb <span style="color:#f92672">(</span> Roles / ClusterRoles <span style="color:#f92672">)</span></code></pre></div>
<p>å¦å¤–ï¼Œä¸€ä¸ªç”¨æˆ·ï¼ˆUser/SAï¼‰å¯ä»¥ç»‘å®šå¤šä¸ªroleæˆ–clusterroleã€‚æœ€ç»ˆçš„æƒé™æ˜¯ç´¯åŠ çš„ã€‚æœ€ä½³å®è·µå°±æ˜¯åˆ›å»ºå¤šç§Roles/ClusterRoles,
ç„¶åé€šè¿‡RoleBindings/ClusterRoleBindingsç»‘å®šåˆ°æœ€ç»ˆç”¨æˆ·ä¸Šã€‚</p>

<p>ä¸‹é¢è¿›å…¥ä¸»é¢˜ï¼Œæ¥çœ‹ä¸‹å®é™…æ“ä½œï¼Œå¦‚ä½•é™åˆ¶ç”¨æˆ·çš„æƒé™ã€‚</p>

<h4 id="ä¸Šæ‰‹-roles-å’Œ-rolebindings">ä¸Šæ‰‹ Roles å’Œ RoleBindings</h4>

<h5 id="ä¸ºäº†æ¼”ç¤º-æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·-è¿™ä¸ªç”¨æˆ·å°†ä½¿ç”¨è¯ä¹¦çš„æ–¹å¼å»å¾—åˆ°api-serverçš„éªŒè¯-è¿™é‡Œä½¿ç”¨kubeadmå·¥å…·">ä¸ºäº†æ¼”ç¤ºï¼Œæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªç”¨æˆ·ã€‚è¿™ä¸ªç”¨æˆ·å°†ä½¿ç”¨è¯ä¹¦çš„æ–¹å¼å»å¾—åˆ°API serverçš„éªŒè¯ã€‚è¿™é‡Œä½¿ç”¨kubeadmå·¥å…·</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@k8s-m1 ~<span style="color:#f92672">]</span># kubeadm alpha kubeconfig user --client-name<span style="color:#f92672">=</span>aliasmee --apiserver-advertise-address<span style="color:#f92672">=</span><span style="color:#ae81ff">172</span>.16.193.245 --apiserver-bind-port<span style="color:#f92672">=</span><span style="color:#ae81ff">8443</span></code></pre></div>
<p>é€šè¿‡è¿è¡Œä¸Šé¢çš„å‘½ä»¤ï¼Œå°†è¾“å‡ºä¿å­˜åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­<code>new-k8s-kubeconfig.yml</code>ï¼Œä¹‹åå¯¼å…¥åˆ°æœ¬åœ°kubectlé»˜è®¤ç›®å½•ä¸‹<code>~/.kube/config</code>ï¼Œå½“ç„¶ä¹Ÿ
å¯ä»¥å°†è¯¥æ–‡ä»¶æ”¾åˆ°å…¶å®ƒä½ å–œæ¬¢çš„ç›®å½•ä¸­ã€‚ä¸è¿‡åœ¨è¿è¡Œkubectlæ—¶ï¼Œéœ€è¦é€šè¿‡å‚æ•°<code>--kubeconfig</code>æ˜ç¡®æŒ‡å®škubectlé…ç½®æ–‡ä»¶çš„å®Œæ•´è·¯å¾„ã€‚</p>

<h5 id="åˆå¹¶æ–°é›†ç¾¤çš„kubeconfigæ–‡ä»¶åˆ°configæ–‡ä»¶ä¸­">åˆå¹¶æ–°é›†ç¾¤çš„kubeconfigæ–‡ä»¶åˆ°configæ–‡ä»¶ä¸­ã€‚</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ export KUBECONFIG<span style="color:#f92672">=</span>/Users/<span style="color:#e6db74">`</span>whoami<span style="color:#e6db74">`</span>/.kube/config:/path/to/file/new-k8s-kubeconfig.yml</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl config view --flatten &gt; /Users/<span style="color:#e6db74">`</span>whoami<span style="color:#e6db74">`</span>/.kube/config</code></pre></div>
<p>æ£€æŸ¥ä¸‹é…ç½®æ–‡ä»¶æ˜¯å¦åˆå¹¶æˆåŠŸï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl config get-contexts
CURRENT   NAME                                                 CLUSTER             AUTHINFO           NAMESPACE
*         aliasmee@kubernetes                                  kubernetes-office   aliasmee           
          kubernetes-admin-cb79817c894e24ead82daad2b606607a9   kubernetes          kubernetes-admin   </code></pre></div>
<p>ç¡®ä¿åˆ‡æ¢åˆ°æ–°çš„é›†ç¾¤ã€‚å¯ä»¥è¿è¡Œä¸‹é¢çš„å‘½ä»¤</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl config use-context aliasmee@kubernetes</code></pre></div>
<p><em>Tips: è¿™é‡Œåˆ†äº«ä¸‹æˆ‘åœ¨åˆå¹¶kubeconfigæ–‡ä»¶è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€ä¸ªå¥‡è‘©é—®é¢˜ã€‚å°±æ˜¯ contextså†…å®¹å­—æ®µä¸èƒ½å‡ºç°é‡å¤å®šä¹‰ï¼Œè™½ç„¶åˆå¹¶æ—¶ä¸ä¼šæŠ¥é”™ã€‚
ä½†æ˜¯åˆå¹¶åæ–°æ–‡ä»¶ä¸­é‡å¤å­—æ®µçš„å€¼ä¼šè¢«è¦†ç›–æ‰ã€‚ä¸èƒ½å‡ºç°é‡å¤çš„å­—æ®µæ˜¯<code>é›†ç¾¤name</code>ã€<code>è®¤è¯ç”¨æˆ·</code>ã€ä»¥åŠcontextsåå­—ã€‚</em></p>

<p>æˆ‘ä»¬æ¥çœ‹ä¸‹å½“å‰çš„ç”¨æˆ·å¯ä»¥åšå“ªäº›æ“ä½œã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get po
No resources found.
Error from server <span style="color:#f92672">(</span>Forbidden<span style="color:#f92672">)</span>: pods is forbidden: User <span style="color:#e6db74">&#34;aliasmee&#34;</span> cannot list resource <span style="color:#e6db74">&#34;pods&#34;</span> in API group <span style="color:#e6db74">&#34;&#34;</span> in the namespace <span style="color:#e6db74">&#34;default&#34;</span></code></pre></div>
<p>å¯ä»¥çœ‹åˆ°é»˜è®¤æ–°å»ºçš„ç”¨æˆ·æ˜¯æ²¡æœ‰æƒé™åˆ—å‡ºdefault namespaceä¸‹çš„podsèµ„æºã€‚</p>

<h5 id="ç°åœ¨æ–°ç”¨æˆ·å·²ç»å‡†å¤‡å°±ç»ªäº†-æˆ‘ä»¬å¼€å§‹ç»™è¯¥ç”¨æˆ·åŠ ç‚¹æƒé™-roles-ç„¶åä½¿ç”¨rolebindingsæˆæƒç»™aliasmeeç”¨æˆ·">ç°åœ¨æ–°ç”¨æˆ·å·²ç»å‡†å¤‡å°±ç»ªäº†ã€‚æˆ‘ä»¬å¼€å§‹ç»™è¯¥ç”¨æˆ·åŠ ç‚¹æƒé™(Roles)ï¼Œç„¶åä½¿ç”¨RoleBinDingsæˆæƒç»™aliasmeeç”¨æˆ·ã€‚</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># kubectl create -f - &lt;&lt;EOF
</span><span style="color:#75715e"></span>kind: Role
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  namespace: default               <span style="color:#75715e"># å®šä¹‰å¯ä»¥æ“ä½œçš„namespace
</span><span style="color:#75715e"></span>  name: manager-default-role
rules:
- apiGroups: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;&#34;</span>, <span style="color:#e6db74">&#34;extensions&#34;</span>, <span style="color:#e6db74">&#34;apps&#34;</span><span style="color:#f92672">]</span>
  resources: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;deployments&#34;</span>, <span style="color:#e6db74">&#34;replicasets&#34;</span>, <span style="color:#e6db74">&#34;pods&#34;</span>,<span style="color:#e6db74">&#34;pods/log&#34;</span>, <span style="color:#e6db74">&#34;services&#34;</span><span style="color:#f92672">]</span>
  verbs: <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;get&#34;</span>, <span style="color:#e6db74">&#34;list&#34;</span>, <span style="color:#e6db74">&#34;watch&#34;</span>, <span style="color:#e6db74">&#34;create&#34;</span>, <span style="color:#e6db74">&#34;update&#34;</span>, <span style="color:#e6db74">&#34;patch&#34;</span>, <span style="color:#e6db74">&#34;delete&#34;</span><span style="color:#f92672">]</span>

EOF</code></pre></div>
<p>å°†ä¸Šé¢çš„Role é€šè¿‡ RoleBinding èµ„æºç»‘å®šåˆ°aliasmeeç”¨æˆ·ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># kubectl create -f - &lt;&lt;EOF
</span><span style="color:#75715e"></span>kind: RoleBinding
apiVersion: rbac.authorization.k8s.io/v1beta1
metadata:
  name: manager-default-binding
  namespace: default              <span style="color:#75715e"># å®šä¹‰å¯ä»¥æ“ä½œçš„namespace
</span><span style="color:#75715e"></span>subjects:
- kind: User                      <span style="color:#75715e"># æˆæƒçš„ç”¨æˆ·ç±»å‹
</span><span style="color:#75715e"></span>  name: aliasmee                  <span style="color:#75715e"># æˆæƒç»™aliasmee
</span><span style="color:#75715e"></span>  apiGroup: <span style="color:#e6db74">&#34;&#34;</span>
roleRef:
  kind: Role
  name: manager-default-role      <span style="color:#75715e"># æˆæƒç»‘å®šçš„Role Name
</span><span style="color:#75715e"></span>  apiGroup: <span style="color:#e6db74">&#34;&#34;</span>
EOF</code></pre></div>
<p>ç°åœ¨æˆ‘ä»¬å¯ä»¥å†æ¬¡è¿è¡Œkubectlæ¥çœ‹ä¸‹æ•ˆæœï¼š</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get po -ndefault
NAME                          READY     STATUS    RESTARTS   AGE
curl-custom-sa                <span style="color:#ae81ff">2</span>/2       Running   <span style="color:#ae81ff">0</span>          109m
nginx-test-79cd7499bf-kcbjp   <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          3d</code></pre></div>
<p>å¦‚ä½ çœ‹åˆ°çš„ä¸€æ ·ã€‚æ–°çš„æˆæƒå·²ç»ç”Ÿæ•ˆäº†ã€‚ä½ ä¹Ÿå¯ä»¥éªŒè¯é™¤äº†get podä¹‹å¤–ï¼Œçœ‹ä¸‹èƒ½å¦get ingï¼Œæˆ–è€…nodeã€‚ç­”æ¡ˆ
è‚¯å®šæ˜¯ä¸èƒ½çš„ã€‚æ˜¯å› ä¸ºæˆ‘ä»¬åˆšæ–°å»ºçš„Roleä¸­ä¸åŒ…å«ingressèµ„æºï¼Œä»¥åŠnodeæ˜¯é›†ç¾¤çº§åˆ«çš„èµ„æºã€‚ç»§ç»­å¾€ä¸‹çœ‹ã€‚</p>

<h5 id="å¦‚ä½•æˆæƒé›†ç¾¤çº§åˆ«çš„æƒé™å‘¢">å¦‚ä½•æˆæƒé›†ç¾¤çº§åˆ«çš„æƒé™å‘¢ï¼Ÿ</h5>

<p>åˆ›å»ºClusterRole ä»¥åŠClusterRoleBind èµ„æº</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># kubectl create -f - &lt;&lt;EOF
</span><span style="color:#75715e"></span>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRole
metadata:
  labels:
    kubernetes.io/bootstrapping: rbac-defaults
  name: aliasmee                  <span style="color:#75715e"># ClusterRole èµ„æºå®šä¹‰æ—¶ä¸éœ€è¦æŒ‡å®šnamespaceï¼
</span><span style="color:#75715e"></span>rules:
- apiGroups:
  - <span style="color:#e6db74">&#34;&#34;</span>
  resources:
  - nodes
  verbs:
  - get
  - list
  - watch
- apiGroups:
  - <span style="color:#e6db74">&#34;&#34;</span>
  resources:
  - namespaces
  verbs:
  - get
  - list
  - watch
  - delete
- apiGroups:
  - <span style="color:#e6db74">&#34;&#34;</span>
  resources:
  - pods
  verbs:
  - get
  - list

EOF</code></pre></div>
<h5 id="åˆ›å»º-clusterrolebinding">åˆ›å»º ClusterRoleBinding</h5>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># kubectl create -f - &lt;&lt;EOF
</span><span style="color:#75715e"></span>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    kubernetes.io/bootstrapping: rbac-defaults
  name: aliasmee
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: aliasmee
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User                      <span style="color:#75715e"># åŒæ ·ï¼Œç»‘å®šUserç±»å‹
</span><span style="color:#75715e"></span>  name: aliasmee
  apiGroup: <span style="color:#e6db74">&#34;&#34;</span>                    <span style="color:#75715e"># â€œâ€ æ˜¯æŒ‡kubernetes core API group
</span><span style="color:#75715e"></span>
EOF</code></pre></div>
<p>åˆ›å»ºå®Œè¿™ä¿©èµ„æºåï¼Œæˆ‘ä»¬åœ¨æœ¬åœ°ä½¿ç”¨kubectléªŒè¯ä¸‹æ˜¯å¦å¯ä»¥æ“ä½œé›†ç¾¤çº§åˆ«çš„èµ„æºã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get po -nmetallb-system
NAME                        READY     STATUS    RESTARTS   AGE
controller-55d74449-vd6f6   <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          20h
speaker-5c6dk               <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          20h
speaker-g74q6               <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          20h
speaker-hrcsw               <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          20h
speaker-ndx67               <span style="color:#ae81ff">1</span>/1       Running   <span style="color:#ae81ff">0</span>          20h</code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">$ kubectl get nodes
NAME      STATUS    ROLES     AGE       VERSION
k8s-m1    Ready     master    4d2h      v1.15.3
k8s-m2    Ready     master    4d2h      v1.15.3
k8s-m3    Ready     master    4d2h      v1.15.3
k8s-n1    Ready     worker    4d2h      v1.15.3</code></pre></div>
<p><em>Tips</em>:</p>

<ol>
<li>åœ¨å®šä¹‰Roleæ—¶ï¼Œæˆ‘ä»¬æŒ‡å®šçš„æ˜¯æŸä¸ªç±»å‹çš„èµ„æºï¼Œk8sä¹Ÿæä¾›resourceNameå­—æ®µï¼Œè¿™æ ·æˆ‘ä»¬å¯ä»¥é™åˆ¶åªå¯¹æŸä¸ªResourceç±»å‹çš„å®ä½“è¿›è¡Œæ“ä½œï¼Œ
è€Œä¸æ˜¯æ‰€æœ‰è¯¥ç±»å‹çš„èµ„æºã€‚æ¯”å¦‚ï¼Œçœ‹ä¸‹é¢çš„å®šä¹‰:</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">- apiGroups:
  - <span style="color:#e6db74">&#34;&#34;</span>
  resourceNames:
  - ng-test
  resources:
  - services
  verbs:
  - get
  - list</code></pre></div>
<p>è¿™æ ·åªèƒ½æŸ¥çœ‹åä¸ºng-testçš„serviceã€‚</p>

<ol>
<li>API serverè¿˜æä¾› non-resourceçš„URLã€‚è®¿é—®è¿™äº›ä¹Ÿéœ€è¦å¾—åˆ°æ˜ç¡®æˆæƒæ‰å¯ä»¥ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å®šä¹‰rulesæŒ‡å®š
nonResourceURLs,è€Œä¸æ˜¯resourcesã€‚å¦‚ä¸‹é¢çš„å®šä¹‰ï¼š</li>
</ol>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml">rules:
- nonResourceURLs:
  - /api
  - /version
  verbs:
  - get</code></pre></div>
<ol>
<li>å¦å¤–RoleBinding ä¹Ÿå¯ä»¥åœ¨æŒ‡å®šroleRefæ—¶ï¼ŒæŒ‡å®šrole çš„kindç±»å‹ä¸ºClusterRoleã€‚è¿™æ„å‘³ç€ï¼Œä½ ä¼šå¾—åˆ°è¿™ä¸ª
ClusterRoleä¸‹çš„æ‰€æœ‰æƒé™ï¼Œä½†åªåœ¨namespaceçº§åˆ«èŒƒå›´ä¸‹ï¼Œå³æƒé™å°†ä¼šé™åˆ¶åœ¨åˆ›å»ºRoleBindingèµ„æºnamspaceèŒƒå›´ä¸‹ã€‚</li>
</ol>

<h4 id="åˆ›å»ºä¸€ä¸ªé¢„ç½®çš„é›†ç¾¤çº§åˆ«çš„åªè¯»ç®¡ç†å‘˜">åˆ›å»ºä¸€ä¸ªé¢„ç½®çš„é›†ç¾¤çº§åˆ«çš„åªè¯»ç®¡ç†å‘˜</h4>

<p>ä»¥ä¸‹æ–‡ä»¶æºç ä½ç½®ï¼š<a href="https://github.com/aliasmee/kube-ops/blob/master/lab3/README.md">github.com/aliasmee/kube-ops</a></p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">kubectl apply -f https://raw.githubusercontent.com/aliasmee/kube-ops/master/lab3/readonly-cluster-roles.yml</code></pre></div>
<p>åˆ›å»ºä¸€ä¸ªClusterRoleBindingså°†æƒé™ç»‘å®šåˆ°æˆ‘ä»¬çš„aliasmeeç”¨æˆ·ä¸Šã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># kubectl create -f - &lt;&lt;EOF
</span><span style="color:#75715e"></span>apiVersion: rbac.authorization.k8s.io/v1
kind: ClusterRoleBinding
metadata:
  labels:
    kubernetes.io/bootstrapping: rbac-defaults
  name: aliasmee
roleRef:
  apiGroup: rbac.authorization.k8s.io
  kind: ClusterRole
  name: cs:ns:readonly
subjects:
- apiGroup: rbac.authorization.k8s.io
  kind: User                      <span style="color:#75715e"># åŒæ ·ï¼Œç»‘å®šUserç±»å‹
</span><span style="color:#75715e"></span>  name: aliasmee
  apiGroup: <span style="color:#e6db74">&#34;&#34;</span>                    <span style="color:#75715e"># â€œâ€ æ˜¯æŒ‡kubernetes core API group
</span><span style="color:#75715e"></span>
EOF</code></pre></div>
<h3 id="è¯¥æ€»ç»“äº†">è¯¥æ€»ç»“äº†</h3>

<p>Kubernetesä¸­çš„RBACç­–ç•¥å¯ä»¥å¯¹ç”¨æˆ·æƒé™åšåˆ°æœ€å°åŒ–æˆæƒã€‚ä¿è¯é›†ç¾¤å†…çš„æ“ä½œå®‰å…¨ã€‚ä¸ä»…ä»…æ˜¯å®ä½“ç”¨æˆ·ã€‚å¯¹äº
è¿è¡Œåœ¨Podä¸­çš„åº”ç”¨ç¨‹åºæœ¬èº«ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡å¯¹ServiceAccountåšæˆæƒé™åˆ¶ã€‚åœ¨è®¤è¯è¿™å—ï¼Œkuberneteså¯ä»¥è®©
ç”¨æˆ·è‡ªä¸»é€‰æ‹©è®¤è¯æ–¹å¼ã€‚è€Œk8såªä¸“æ³¨äºæˆæƒæƒé™éƒ¨åˆ†ã€‚è‰¯å¥½çš„æƒé™è®¾è®¡ä¸ä»…å¯ä»¥è®©ç”¨æˆ·åšæ›´å¤šè‡ªä¸»çš„æ§åˆ¶ï¼Œå¹¶ä¸”æ–¹ä¾¿æ‰©å±•ã€‚</p>

<p>é¢˜å¤–è¯ï¼šå¯¹äºpodä¸podä¹‹é—´çš„ç½‘ç»œé€šä¿¡é™åˆ¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨NetworkPolicyæ¥åšé™åˆ¶ã€‚ä¸è¿‡ä¾èµ–ä¸åº•å±‚çš„cniæ’ä»¶ã€‚
è¿™ä¸ªæ—¶å€™ï¼Œistioå¯ä»¥é€šè¿‡sidecaræ¥å®ç°ç½‘ç»œæ§åˆ¶ã€‚ä¸‹ä¸€æ¬¡æœ‰æ—¶é—´å†æ¥åˆ†äº«ã€‚</p>

<h3 id="å‚è€ƒ">å‚è€ƒ</h3>

<p><a href="https://www.manning.com/books/kubernetes-in-action">Kubernetes In Action</a>
<a href="https://kubernetes.io/docs/reference/access-authn-authz/rbac/">Kubernetes RBAC</a></p></article>
    <footer class="post-footer">
      
      <ul class="post-tags">
        
          <li><a href="https://aliasmee.github.io/tags/rbac"><span class="tag">Rbac</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/kubernetes"><span class="tag">Kubernetes</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/kubernetes-rbac"><span class="tag">Kubernetes Rbac</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/kubernetes-user"><span class="tag">Kubernetes User</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/kubernetes-api"><span class="tag">Kubernetes Api</span></a></li>
        
          <li><a href="https://aliasmee.github.io/tags/securing-kubernetes"><span class="tag">Securing Kubernetes</span></a></li>
        
      </ul>
      
      <p class="post-copyright">
        Â© This post is licensed under a Creative Commons Attribution-NonCommercial 4.0 International Licenseï¼Œplease give source if you wish to quote or reproduce.
 Â©è¯¥æ–‡ç« æ ¹æ®-éå•†ä¸šæ€§ä½¿ç”¨-ç›¸åŒæ–¹å¼å…±äº«4.0å›½é™…è®¸å¯ç½²ååˆ›é€ çš„ï¼Œå¦‚æœæ‚¨å¸Œæœ›å¼•ç”¨æˆ–å¤åˆ¶ï¼Œè¯·æä¾›å‡ºå¤„ï¼è°¢è°¢ã€‚This post was published <strong>270</strong> days ago, content in the post may be inaccurate, even wrong now, please take risk yourself.
      </p>
    </footer>
    
      <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "aliasmee" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
      
    
  </section>
  <footer class="site-footer">
  <p>Â© 2017-2020 aliasmee&#39;s blog </p>
  <p>Powered by <a href="https://gohugo.io/" target="_blank">Hugo</a> with theme <a href="https://github.com/laozhu/hugo-nuo" target="_blank">Nuo</a>.</p>
  
</footer>



<script async src="//cdn.bootcss.com/video.js/6.2.8/alt/video.novtt.min.js"></script>
<script async src="//cdn.bootcss.com/mathjax/2.7.2/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$'], ['\\(','\\)']],
      displayMath: [['$$','$$'], ['\\[','\\]']],
      processEscapes: true,
      processEnvironments: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
      TeX: { equationNumbers: { autoNumber: "AMS" },
      extensions: ["AMSmath.js", "AMSsymbols.js"] }
    }
  });
</script>
<script type="text/x-mathjax-config">
  // Fix <code> tags after MathJax finishes running. This is a
  // hack to overcome a shortcoming of Markdown. Discussion at
  // https://github.com/mojombo/jekyll/issues/199
  MathJax.Hub.Queue(() => {
    MathJax.Hub.getAllJax().map(v => v.SourceElement().parentNode.className += ' has-jax');
  });
</script>

<script src="https://aliasmee.github.io/js/bundle.d1288006cf.js"></script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-120538012-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='//www.google-analytics.com/analytics.js'></script>





  </body>
</html>
